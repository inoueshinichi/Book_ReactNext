<!-- index.html -->
<html>
    <body>
        <!-- ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®èª­ã¿è¾¼ã¿(ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çµŒç”±) -->
        
        <!-- Reactã®ä»®æƒ³DOMã‚’æ“ä½œ -->
        <!-- React DCM -->
        <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
        <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
        <!-- Babel DCM  -->
        <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
        
        <!-- SD Reacté›‘èªŒ ä¾‹é¡Œ1 -->
        <div id="root1">
            <!-- HTMLã¯å®£è¨€çš„ -->
            <!-- <div class="message">
                ã“ã‚“ã«ã¡ã¯<span class="name">å¤ªéƒ</span>ã•ã‚“!
            </div> -->
        </div>

        <!-- JavaScriptã®DOMæ“ä½œã¯å‘½ä»¤çš„ -->
        <script type="text/javascript" defer>
            const span = document.createElement("span");
            span.classList.add('name');
            span.textContent = "å¤ªéƒ";
            const div = document.createElement('div');
            div.classList.add("message");
            div.appendChild(document.createTextNode("ã“ã‚“ã«ã¡ã¯"));
            div.appendChild(span);
            div.appendChild(document.createTextNode("ã•ã‚“!"));
            div.appendChild(document.createElement('hr'));

            // const hr_root1 = document.querySelector("#root1 hr");
            const root1 = document.getElementById('root1');
            root1.appendChild(div);
            
        </script>

        <!-- SD Reacté›‘èªŒ ä¾‹é¡Œ2 -->
        <div id="root2"></div>
        <hr>
        
        <script type="text/jsx" defer>

            // ã‚¯ãƒ©ã‚¹æ§‹æ–‡ã§å®šç¾©ã™ã‚‹Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
            class ToDoItem extends React.Component {
                render() {
                    const { key, item } = this.props;
                    return (
                        <li>
                            <label>
                                <input type="checkbox" checked={item.done} />
                                {item.name}
                            </label>
                        </li>
                    );
                }
            }

            /*function ToDoItem(props) {
                return (
                    <li>
                        <label>
                            <input type="checkbox" checked={props.item.done} />
                            {props.item.name}
                        </label>
                    </li>
                );
            }*/

            function ToDoList(props) {
                return (
                    <ul className="todo-list">
                        {props.items.map((item) => (
                           <ToDoItem key={item.id} item={item} />
                        ))}
                    </ul>
                );
            }

            function App(props) {
                const items = [
                    { id: 1, name: "ãƒ€ãƒ³ã‚¹ã®ãƒ¬ãƒƒã‚¹ãƒ³", done: false },
                    { id: 2, name: "å–¶æ¥­æ´»å‹•", done: true },
                    { id: 3, name: "é›‘èªŒã®ãŠä»•äº‹", done: false },
                ];

                return (
                    <div>
                        <h1>ToDoãƒ¢ãƒƒã‚¯</h1>
                        <ToDoList items={items} />
                    </div>
                );
            }

            ReactDOM.render(<App />, document.getElementById('root2'));
        </script>

        <!-- SD Reacté›‘èªŒ ä¾‹é¡Œ3 -->
        <div id="root3"></div>
        <br>

        <script type="text/jsx" defer>
            function Counter(props) {
                // ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒƒã‚¯ã‚’å‘¼ã³å‡ºã—ã¦ã€stateã¨æ›´æ–°ç”¨é–¢æ•°ã‚’å–å¾—ã™ã‚‹
                const [count, setCount] = React.useState(0);
                return (
                    <div>
                        <button onClick={() => setCount(count + 1)}>Add</button>
                        ã‚¯ãƒªãƒƒã‚¯æ•°: {count}å›
                    </div>
                );
            }

            function App(props) {
                return (
                    <div>
                        <Counter />
                        <Counter />
                        <Counter />
                    </div>
                );
            }

            ReactDOM.render(<App />, document.getElementById('root3'));
        </script>

        <!-- SD Reacté›‘èªŒ ä¾‹é¡Œ4 -->
        <div id="root4"></div>
        <br>

        <script type="text/jsx" defer>

            function Counter(props) {
                // stateã§ã¯ãªãpropsã‹ã‚‰ã‚«ã‚¦ãƒ³ãƒˆã‚’å—ã‘ã‚‹
                const { count, setCount } = props;
                return (
                    <div>
                        <button onClick={() => setCount(count + 1)}>Add</button>
                        ã‚¯ãƒªãƒƒã‚¯æ•°: {count}å€‹
                    </div>
                );
            }

            function App() {
                // ã‚«ã‚¦ãƒ³ã‚¿é–“ã§å…±æœ‰ã™ã‚‹state
                const [count, setCount] = React.useState(0);
                return (
                    <div>
                        <Counter count={count} setCount={setCount} />
                        <Counter count={count} setCount={setCount} />
                        <Counter count={count} setCount={setCount} />
                    </div>
                );
            }

            ReactDOM.render(<App />, document.getElementById('root4'));
        </script>

        <!-- SD Reacté›‘èªŒ ä¾‹é¡Œ5 -->
        <div id="root5"></div>
        <br>

        <script type="text/jsx" defer>

            // canvasè¦ç´ ã«å¯¾å¿œã™ã‚‹å††ã‚°ãƒ©ãƒ•ã‚’è¨˜è¿°
            function Pie(props) {
                const { percent, color = "#ff0000" } = props;

                // ãƒ¬ãƒ³ãƒ€ãƒ¼ã—ãŸcanvasè¦ç´ ã¸ã®å‚ç…§ã‚’å–å¾—
                const canvasRef = React.useRef();

                React.useEffect(() => {
                    // ãƒ¬ãƒ³ãƒ€ãƒ¼å¾Œã«æ¯å›ã‚³ãƒ¼ãƒ«ã—ã¦ã‚‚ã‚‰ã†é–¢æ•°ã‚’ç™»éŒ²ã™ã‚‹
                    const ctx = canvasRef.current.getContext('2d');
                    ctx.clearRect(0,0,100,100);
                    ctx.fillStyle = color;
                    ctx.beginPath();
                    ctx.moveTo(50,50);
                    ctx.arc(50,50,50,0, (percent/100) * Math.PI * 2, false);
                    ctx.lineTo(50,50);
                    ctx.fill();
                });

                return <canvas ref={canvasRef} width={100} height={100} />;
            }

            function App() {
                return <Pie percent={80} />;
            }

            ReactDOM.render(<App />, document.getElementById('root5'));
        </script>

        <!-- SD Reacté›‘èªŒ ä¾‹é¡Œ6 çŠ¶æ…‹ç®¡ç† -->
        <div id="root6"></div>
        <br>

        <script type="text/jsx" defer>
            
        </script>

        
        <!-- ç”ŸDOMã®æ“ä½œã¨Reactè¦ç´ ã®æ“ä½œã®æ¯”è¼ƒ -->
        <div id="app1"></div>
        <hr>
        
        <!-- ç”ŸDOMã‚’æ“ä½œ -->
        <!-- <script type="text/javascript" defer>
            // Select the div element with 'app1'
            const app1 = document.getElementById('app1');

            // Create a new H1 element
            const header = document.createElement('h1');

            // Create a new text node for the H1 element
            const headerContent = document.createTextNode(
                'Develop. Preview. Ship. â›µ',
            );

            // Append the text to the H1 element
            header.appendChild(headerContent);

            // Place the H1 element inside the div
            app1.appendChild(header);
        </script> -->

        

        <!-- <script type="text/javascript"> -->
        <script type="text/jsx" defer>
            const app1 = document.getElementById('app1');

            function createTitle(title) {
                if (title) {
                    return title;
                } else {
                    return 'Default title';
                }
            }
            
            function Header({ title }) {
                console.log(title);   
                // return (<h1>Develop. Preview. Ship. â›µ</h1>);
                // return <h1>{`Cool ${title}`}</h1>;
                return <h1>{createTitle(title)}</h1>;
            }

            const names = ['Ada Lovelace', 'Grace Hopper', 'Margaret Hamilton'];

            
            function HomePage() {
                // state
                const [text, setText] = React.useState("");

                // callback
                function handleAddText() {
                    setText('I will get a new job!');
                }

                return (
                    <>
                        <div>
                            <Header title="React ğŸ’™" />
                            <Header title="A new title" />
                        </div>
                        {/* å‹•çš„ãªãƒªã‚¹ãƒˆä½œæˆ */}
                        <div>
                            <ul>
                                {names.map((name) => (
                                    <li key={name}>{name}</li>
                                ))}
                            </ul>
                        </div>
                       {/* ã‚¤ãƒ™ãƒ³ãƒˆãƒœã‚¿ãƒ³ */}
                       <button id="like-button" onClick={handleAddText}>Like</button>
                       {/*ã‚¤ãƒ™ãƒ³ãƒˆãƒœã‚¿ãƒ³ã§çŠ¶æ…‹ãŒå¤‰åŒ–ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆ*/}
                       <p>{text}</p>
                    </>
                );
            }

            ReactDOM.render(<HomePage />, app1/*DOM*/);
        </script>

        <div id="app2"></div>
        <hr>

        <!-- Reactã®ä¾‹2 -->
        <script type="text/jsx" defer>
            const app2 = document.getElementById('app2');
            const msg = getGreeting();
            
            function getGreeting() {
                // ãƒ©ãƒ³ãƒ€ãƒ ãªå€¤ã‚’å¾—ã‚‹
                const r = Math.floor(Math.random() * 3);
                // å€¤ã«å¿œã˜ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™
                if (r == 0) return <p>ä»Šæ—¥ã‚‚é ‘å¼µã‚Šã¾ã—ã‚‡ã†ã€‚</p>
                if (r == 1) return <p>ã“ã‚“ã«ã¡ã¯ã€‚</p>
                if (r == 2) return <p>æ™´å¤©ã§ã™ã€‚</p>
            }

            ReactDOM.render(msg, app2);

        </script>

        <div id="app3"></div>
        <hr>

        <!-- Reactã®ä¾‹3 -->
        <script type="text/jsx" defer>
            const item = "SDã‚«ãƒ¼ãƒ‰";
            const value = 1200;
            // HTMLã‚¿ã‚°ã®ä¸­ã«å¤‰æ•°ã‚’åŸ‹ã‚è¾¼ã‚€
            const msg = <h1>{item} - {value}å††</h1>

            const app3 = document.getElementById("app3");
            ReactDOM.render(msg, app3);
        </script>

        <div id="app4"></div>
        <hr>

        <!-- Reactã®ä¾‹4 -->
        <script type="text/jsx" defer>
            const title = "æ›¸é“";
            const imgUri = "https://hino-shakyo.com/user/wp-content/uploads/2019/08/2020_01-54.jpg";
            // JSXã§è¦ç´ ã‚’å®šç¾©
            const msg = (
                <div>
                    <h1>{title}</h1>
                    <p><img src={imgUri} width={256} height={256}/></p>
                </div>
            );

            const app4 = document.getElementById("app4");
            ReactDOM.render(msg, app4);
        </script>

        <div id="app5"></div>
        <hr>

        <!-- Reactã®ä¾‹5 -->
        <script type="text/jsx" defer>
            const app5 = document.getElementById("app5");
            
            function getDOM() {
                // CSS1 : é€šå¸¸ã®CSSã‚¹ã‚¿ã‚¤ãƒ«
                const css1 = {
                    "color": 'red',
                    "background-color": '#f0f0ff',
                    "font-size": '2em'
                };

                // CSS2 : JSã‚¹ã‚¿ã‚¤ãƒ«
                const css2 = {
                    color: 'blue',
                    backgroundColor: '#fff0f0',
                    fontSize: '2em'
                };

                return (
                    <>
                        <p style={css1}>æ¢ã™ã®ã«æ™‚ãŒã‚ã‚Š</p>
                        <p style={css2}>æ¨ã¦ã‚‹ã®ã«æ™‚ãŒã‚ã‚‹</p>
                    </>
                );
            }

            ReactDOM.render(getDOM(), app5);
        </script>

        <div id="app6"></div>
        <hr>

        <!-- Reactã®ä¾‹6 -->
        <script type="text/jsx" defer>
            const app6 = document.getElementById("app6");
            const value = "<<< è±šã«çœŸç ã€çŒ«ã«å°åˆ¤ >>>";
            const jsxElem = <h2>{value}</h2>;
            ReactDOM.render(jsxElem, app6);
        </script>

        <div id="app7"></div>
        <hr>

        <!-- Reactã®ä¾‹7 -->
        <script type="text/jsx" defer>
            const app7 = document.getElementById('app7');

            // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆ©ç”¨
            const dom = <div>
                <PhotoText image="pic1" label="å—å›½ã®æµœè¾ºã§ã‚†ã£ãŸã‚Š"/>
                <PhotoText image="pic2" label="å—å›½ã®æµ·ã¯é–‹æ”¾çš„"/>
                <PhotoText image="pic3" label="æµ·ã€æµ·ã€æµ·ã€é’ã„æµ·"/>
            </div>;

            ReactDOM.render(dom, app7);

            function PhotoText(props) {
                const url = "img/" + props.image + ".jpeg";
                const label = props.label;
                const boxStyle = {
                    border: "1px solid silver",
                    margin: "8px",
                    padding: "4px"
                };
                return (
                    <div style={borderStyle}>
                        <img src={url} width="128"/>
                        <span> {label} </span>
                    </div>
                );
            }
        </script>

        <div id="app8"></div>
        <hr>

        <!-- Reactã®ä¾‹8 -->
        <script type="text/jsx" defer>
            // å®šæœŸçš„ã«æ™‚é–“ã‚’è¡¨ç¤º
            setInterval(showClock, 1000);

            // æ¯ç§’å®Ÿè¡Œã•ã‚Œã‚‹é–¢æ•°
            function showClock() {
                const d = new Date();
                const hour = d.getHours();
                const min = d.getMinutes();
                const sec = d.getSeconds();
                const elem = <div>
                    {hour}:{min}:{sec}
                </div>;
                
                const app8 = document.getElementById('app8');
                ReactDOM.render(elem, app8);
            }

        </script>

        <div id="app9"></div>
        <hr>

        <!-- Reactã®ä¾‹9 -->
        <script type="text/jsx" defer>
            // å®šæœŸçš„ã«æ™‚é–“ã‚’è¡¨ç¤º
            setInterval(showClock00, 1000);

            // æ¯ç§’å®Ÿè¡Œã•ã‚Œã‚‹é–¢æ•°
            function showClock00() {
                const d = new Date();
                const [hour, min, sec] = [
                    d.getHours(),
                    d.getMinutes(),
                    d.getSeconds()
                ];

                const z2 = (v) => {
                    // 0ã§åŸ‹ã‚ã¦è¡¨ç¤ºã™ã‚‹
                    const s = "00" + v;
                    return s.substr(s.length - 2, 2);
                };   

                // DOM
                const elem = (
                    <div>
                        {z2(hour)}:{z2(min)}:{z2(sec)}
                    </div>
                );

                const app9 = document.getElementById('app9');

                ReactDOM.render(elem, app9);
            }
        </script>

        <div id="app10"></div>
        <hr>

        <script type="text/jsx" defer>
            setInterval(update, 1000);

            function update() {
                // ç¾åœ¨æ™‚åˆ»ã‚’2é€²æ•°ã«å¤‰æ›
                const now = new Date();
                const hh = z2(now.getHours());
                const mm = z2(now.getMinutes());
                const ss = z2(now.getSeconds());
                const binStr = hh + mm + ss;
                const style0 = { color: 'brown' };
                const style1 = { color: 'red' };
                const lines = [];
                for (let i = 0; i < binStr.length; i++) {
                    const v = parseInt(binStr.substr(i, 1)); // 1æ–‡å­—ãšã¤å–å¾—
                    const bin = "0000" + v.toString(2); // 2é€²æ•°(4æ¡+4æ¡)æ–‡å­—åˆ—
                    // ä¸‹ä½4æ¡ã‚’å–å¾—
                    const bin8 = bin.substr(bin.length - 4, 4);
                    // 2é€²æ•°ã‚’æ§‹æˆã™ã‚‹Reactè¦ç´ ã‚’æ§‹ç¯‰
                    for (let j = 0; j < bin8.length; j++) {
                        if (bin8.substr(j,1) === '0') {
                            lines.push(<span style={style0}>â—‹</span>);
                        } else {
                            lines.push(<span style={style1}>â—</span>);
                        }
                    }
                    lines.push(<br />);
                }

                // DOM
                const app10 = document.getElementById("app10");
                ReactDOM.render(<div>{lines}</div>, app10);
            }

            function z2(v) {
                v = String("00" + v);
                return v.substr(v.length - 2, 2);
            }
        </script>

        <div id="app11" style="margin: 20px;"></div>
        <div id="info"></div>
        <hr>

        <script type="text/jsx" defer>

            // è‰²é¸æŠã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
            class ColorBox extends React.Component {
                constructor(props) {
                    super(props);
                    this.state = {
                        index: 0,
                        colors: ['red', 'blue', 'green', 'yellow', 'black']
                    };
                }

                render() {
                    // stateã‹ã‚‰çŠ¶æ…‹ã‚’å–ã‚Šå‡ºã™
                    const colors = this.state.colors;
                    const index = this.state.index;

                    // ç¾åœ¨ã®è‰²é¸æŠ
                    const cur = (index >= 0) ? colors[index] : "";

                    // å„è‰²æ¯ã«spanè¦ç´ ã‚’ç”Ÿæˆã™ã‚‹(ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒªã‚¹ãƒˆ)
                    const items = colors.map((c) => {
                        // é¸æŠæ ãªã‚‰è‰²ã‚’ã¤ã‘ã‚‹
                        let bs = '1px solid white';
                        if (c === cur) {
                            bs = '1px solid black';
                        }

                        // è‰²æ¯ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¨­å®š
                        const cstyle = {
                            color: c,
                            border: bs,
                            fontSize: "50px"
                        };

                        // è‰²ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸæ™‚ã®å‡¦ç†
                        const clickHandler = (e) => {
                            const c = e.target.style.color; // e.g 'red'
                            const i = this.state.colors.indexOf(c); // e.g 1
                            // çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹
                            this.setState({index: i});

                            // ä¸Šä½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
                            if (this.props.onColorChange) {
                                this.props.onColorChange({color: c});
                            }
                        }

                        // spanè¦ç´ ã§è‰²ã®ã‚¿ã‚¤ãƒ«ã‚’è¿”ã™
                        return (
                            <span onClick={clickHandler} style={cstyle}>â– </span>
                        );
                    });

                    // æç”»
                    return (
                        <div>{items}</div>
                    );
                }
            }

            // Reactã§DOMã‚’æ›¸ãæ›ãˆã‚‹
            const colorHandler = (e) => {
                ReactDOM.render(
                    <span>{e.color}</span>,
                    document.getElementById('info')
                );
            };

            const dom = <div>
                <ColorBox id="cb" onColorChange={colorHandler} />
            </div>;

            ReactDOM.render(dom, document.getElementById('app11'));
        </script>


    </body>
</html>

